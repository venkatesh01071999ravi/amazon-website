<!DOCTYPE html>

<html lang="en">
    
  <head>
      
    <meta charset="utf-8">
      
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	<style type="text/css">
	
	    .jumbotron{
	
	         text-align:center;
	         margin-top:80px;
			 background-color:black;
			 color:white;
			
	    }
		
		#pa{
		
		  color:black;
		
		
		}
		
		
	
	</style>
	
   </head>

<body>
              
			  <div class="container">
			  <div class="jumbotron">
			
				  <h1 class="display-4">Password reset</h1>
				  <hr class="my-4">
				  <form>
				  <div class="form-group">
					<label for="exampleInputPassword1">Password</label>
					<input type="password" class="form-control" id="exampleInputPassword1">
				  </div>
				  
				  <div class="form-group">
					<label for="Confirm">Confirm Password</label>
					<input type="password" class="form-control" id="Confirm">
				  </div>
				    
				    <button type="submit" class="btn btn-primary" style="margin-bottom:5px;" onclick="encrypt()">Change</button>
					<p class="lead" id="pa"></p>
			    </form>
			  </div>
			  </div>
















</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/hmac-md5.min.js"></script>
<script>

   
	var Email = document.location.search.replace(/^.*?\=/,''); //location is nothing but url
	
	function encrypt(){
	
	
	var pass=document.getElementById('exampleInputPassword1').value;
	var hash = CryptoJS.MD5(pass);
	store(hash);
	
	}
	
	function store(hello){
        
		var password1 = hello.toString();
		var Pass = document.getElementById("exampleInputPassword1");
		var cnf = document.getElementById("Confirm");
		
		const lenObj = JSON.parse(localStorage.getItem('users'));
	    var len = lenObj.length;
		console.log(len);
		if(Pass.value != cnf.value){
		
		 
		 alert('Passwords doesnt match');
		
		
		}
		
		else {
		
		   for(i=0;i<len;i++){
		   
		    if(lenObj[i].email == Email){
			   lenObj[i].pass = password1;
			   localStorage.setItem('users',JSON.stringify(lenObj));
			   alert('Password has changed successfully!!');
			   window.location = "signin.html";
			
			}
		   
		   
		   
		   }
		
		
		
		}
		
   
   
   
   
    $("form").submit(function(e){
        e.preventDefault();
    });
   
   

}


</script>

</html>   